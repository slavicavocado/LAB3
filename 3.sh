#!/bin/bash

# Проверяем, что указаны оба слова для замены
if [ $# -ne 2 ]; then
    echo "Использование: $0 <старое_слово> <новое_слово>"
    exit 1
fi

# Задаем старое и новое слова для замены
OLD_WORD=$1
NEW_WORD=$2

# Создаем временный файл для сохранения списка найденных файлов
TEMP_FILE=$(mktemp)

# Находим все текстовые файлы с расширением .txt и заменяем в них старое слово на новое
for FILE in $(find . -type f -name "*.txt"); do
    # Заменяем старое слово на новое в текущем файле
    sed -i "s/\b$OLD_WORD\b/$NEW_WORD/g" "$FILE"
    # Записываем путь к измененному файлу во временный файл
    echo "$FILE" >> "$TEMP_FILE"
done

# Выводим сообщение об успешном завершении
echo "Слово '$OLD_WORD' было успешно заменено на '$NEW_WORD' в текстовых файлах."

# Сохраняем список измененных файлов в отдельный файл
LIST_FILE="changed_files.txt"
mv "$TEMP_FILE" "$LIST_FILE"
echo "Список измененных файлов сохранен в файле '$LIST_FILE'."

# Выход из скрипта
exit 0